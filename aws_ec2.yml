---
plugin: amazon.aws.aws_ec2
regions:
  - us-east-1
aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"

keyed_groups:
  - key: tags.Role
    prefix: ""
    separator: ""

# hostnames:
#   - network_interface.association.public_ip

compose:
  ansible_host: private_ip_address
  ansible_user: ubuntu
  ansible_ssh_private_key_file: "/home/ubuntu/mongo/key01.pem"
groups:
  mongo_master: "'mongo_master' in (tags['Role'] | default(''))"
  mongo_slave: "'mongo_slave' in (tags['Role'] | default(''))"
  new_slave: "'new_slave' in (tags['Role'] | default(''))"
  remove_slave: "'remove_slave' in (tags['Role'] | default(''))"









